package view;
import javax.swing.*;
import javax.swing.border.EmptyBorder;
import java.awt.*;
import java.net.URL;

public class BuyTicketUI extends JFrame {

    private final Color PRIMARY = new Color(33, 37, 104);
    private final Color BG = new Color(245, 250, 255);
    private final Color CARD = Color.WHITE;

    public BuyTicketUI() {
        setTitle("Mua v√© Metro");
        setSize(420, 800);
        setLocationRelativeTo(null);
        setDefaultCloseOperation(EXIT_ON_CLOSE);

        JPanel main = new JPanel();
        main.setBackground(BG);
        main.setLayout(new BoxLayout(main, BoxLayout.Y_AXIS));

        main.add(header());
        main.add(welcomeCard());
        main.add(sectionTitle("üî• N·ªïi b·∫≠t üî•"));

        main.add(ticketCard("V√© 1 ng√†y", "40.000 ƒë", 
                "https://cdn-icons-png.flaticon.com/512/1021/1021264.png"));

        main.add(ticketCard("V√© 3 ng√†y", "90.000 ƒë", 
                "https://cdn-icons-png.flaticon.com/512/1021/1021328.png"));

        main.add(ticketCard("V√© th√°ng", "300.000 ƒë", 
                "https://cdn-icons-png.flaticon.com/512/2693/2693507.png"));

        main.add(sectionTitle("üéí ∆Øu ƒë√£i H·ªçc sinh ‚Ä¢ Sinh vi√™n üéì"));

        main.add(ticketCard("V√© th√°ng HSSV", "150.000 ƒë", 
                "https://cdn-icons-png.flaticon.com/512/3135/3135755.png"));

        JScrollPane scroll = new JScrollPane(main);
        scroll.setBorder(null);
        scroll.getVerticalScrollBar().setUnitIncrement(16);

        add(scroll);
    }

    // ================= HEADER =================
    private JPanel header() {
        JPanel p = new JPanel(new BorderLayout());
        p.setBackground(BG);
        p.setBorder(new EmptyBorder(20, 20, 20, 20));

        JLabel home = new JLabel(loadIcon(
                "https://cdn-icons-png.flaticon.com/512/1946/1946488.png", 28, 28));

        JLabel title = new JLabel("Mua v√©", SwingConstants.CENTER);
        title.setFont(new Font("Segoe UI", Font.BOLD, 22));
        title.setForeground(PRIMARY);

        p.add(home, BorderLayout.WEST);
        p.add(title, BorderLayout.CENTER);

        return p;
    }

    // ================= WELCOME =================
    private JPanel welcomeCard() {
        JPanel p = new JPanel(new BorderLayout(10, 10));
        p.setBackground(CARD);
        p.setBorder(new EmptyBorder(15, 15, 15, 15));
        p.setMaximumSize(new Dimension(360, 100));

        JLabel avatar = new JLabel(loadIcon(
                "https://cdn-icons-png.flaticon.com/512/742/742752.png", 60, 60));

        JLabel text = new JLabel(
                "<html><b>Ch√†o m·ª´ng, Th·∫°nh Nguy·ªÖn!</b><br/>" +
                "B·∫Øt ƒë·∫ßu c√°c tr·∫£i nghi·ªám m·ªõi c√πng Metro nh√©!</html>"
        );
        text.setFont(new Font("Segoe UI", Font.PLAIN, 14));
        text.setForeground(PRIMARY);

        p.add(avatar, BorderLayout.WEST);
        p.add(text, BorderLayout.CENTER);

        return wrap(p);
    }

    // ================= SECTION TITLE =================
    private Component sectionTitle(String t) {
        JLabel lbl = new JLabel(t);
        lbl.setFont(new Font("Segoe UI", Font.BOLD, 18));
        lbl.setForeground(PRIMARY);
        lbl.setBorder(new EmptyBorder(15, 25, 10, 0));

        return lbl;
    }

    // ================= TICKET CARD =================
    private JPanel ticketCard(String name, String price, String iconUrl) {
        JPanel p = new JPanel(new Bord
